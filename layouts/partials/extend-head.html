<!-- 移动端禁用系统主题检测的最小解决方案 -->
<style>
/* 仅在移动端覆盖系统主题检测 */
@media (max-width: 768px) {
  @media (prefers-color-scheme: dark) {
    :root, html, body {
      background-color: #ffffff !important;
      color: #444444 !important;
    }
  }
}
</style>

<script>
// 移动端强制亮色模式的最小脚本
if (window.innerWidth <= 768) {
  document.documentElement.classList.remove('dark');
  document.documentElement.classList.add('light');
  
  // 覆盖移动端的媒体查询检测
  if (window.matchMedia) {
    const original = window.matchMedia;
    window.matchMedia = function(query) {
      if (query.includes('prefers-color-scheme')) {
        return { matches: query.includes('light'), media: query };
      }
      return original.call(this, query);
    };
  }
  
  try { localStorage.setItem('theme', 'light'); } catch (e) {}
}
</script>

<!-- 导航栏滚动隐藏脚本 -->
{{ $hideNavOnScroll := resources.Get "js/hideNavOnScroll.js" }}

{{ if hugo.IsProduction }}
  {{ $hideNavOnScroll = $hideNavOnScroll | minify | fingerprint }}
  <script 
    src="{{ $hideNavOnScroll.RelPermalink }}" 
    integrity="{{ $hideNavOnScroll.Data.Integrity }}" 
    crossorigin="anonymous" 
    defer></script>
{{ else }}
  <script src="{{ $hideNavOnScroll.RelPermalink }}" defer></script>
{{ end }}